{"remainingRequest":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/babel-loader/lib/index.js!/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/src/views/History.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/src/views/History.vue","mtime":1589404050016},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0aWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9ob21lL3NhbnpoYXIvUHVibGljL1Byb2plY3RzL1Z1ZSBQcm9qZWN0cy9zaG9wLWZpcmViYXNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgcGFnaW5hdGlvbk1peGluIGZyb20gJ0AvbWl4aW5zL3BhZ2luYXRpb24ubWl4aW4nOwppbXBvcnQgSGlzdG9yeVRhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9IaXN0b3J5VGFibGUnOwppbXBvcnQgeyBQaWUgfSBmcm9tICd2dWUtY2hhcnRqcyc7CmltcG9ydCBsb2NhbGl6ZUZpbHRlciBmcm9tICdAL2ZpbHRlcnMvbG9jYWxpemUuZmlsdGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG1ldGFJbmZvOiBmdW5jdGlvbiBtZXRhSW5mbygpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiB0aGlzLiR0aXRsZSgnTWVudV9IaXN0b3J5JykKICAgIH07CiAgfSwKICBuYW1lOiAnaGlzdG9yeScsCiAgImV4dGVuZHMiOiBQaWUsCiAgY29tcG9uZW50czogewogICAgSGlzdG9yeVRhYmxlOiBIaXN0b3J5VGFibGUKICB9LAogIG1peGluczogW3BhZ2luYXRpb25NaXhpbl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHJlY29yZHM6IFtdLAogICAgICBwcmV2OiBsb2NhbGl6ZUZpbHRlcignUHJldicpLAogICAgICBuZXh0OiBsb2NhbGl6ZUZpbHRlcignTmV4dCcpCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBjYXRlZ29yaWVzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBtb3VudGVkJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2ZldGNoUmVjb3JkcycpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHRoaXMucmVjb3JkcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdmZXRjaENhdGVnb3JpZXMnKSk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXRlZ29yaWVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgdGhpcy5zZXR1cChjYXRlZ29yaWVzKTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIG51bGwsIHRoaXMpOwogIH0sCiAgbWV0aG9kczogewogICAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKGNhdGVnb3JpZXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuc2V0dXBQYWdpbmF0aW9uKHRoaXMucmVjb3Jkcy5tYXAoZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCByZWNvcmQsIHsKICAgICAgICAgIGNhdGVnb3J5TmFtZTogY2F0ZWdvcmllcy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgIHJldHVybiBjLmlkID09PSByZWNvcmQuY2F0ZWdvcnlJZDsKICAgICAgICAgIH0pLnRpdGxlLAogICAgICAgICAgdHlwZUNsYXNzOiByZWNvcmQudHlwZSA9PT0gJ2luY29tZScgPyAnZ3JlZW4nIDogJ3JlZCcsCiAgICAgICAgICB0eXBlVGV4dDogcmVjb3JkLnR5cGUgPT09ICdpbmNvbWUnID8gbG9jYWxpemVGaWx0ZXIoJ0luY29tZScpIDogbG9jYWxpemVGaWx0ZXIoJ091dGNvbWUnKQogICAgICAgIH0pOwogICAgICB9KSk7CiAgICAgIHRoaXMucmVuZGVyQ2hhcnQoewogICAgICAgIGxhYmVsczogY2F0ZWdvcmllcy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLnRpdGxlOwogICAgICAgIH0pLAogICAgICAgIGRhdGFzZXRzOiBbewogICAgICAgICAgbGFiZWw6IGxvY2FsaXplRmlsdGVyKCdDb3N0c19ieV/RgWF0ZWdvcnknKSwKICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWNvcmRzLnJlZHVjZShmdW5jdGlvbiAodG90YWwsIHIpIHsKICAgICAgICAgICAgICBpZiAoci5jYXRlZ29yeUlkID09PSBjLmlkICYmIHIudHlwZSA9PT0gJ291dGNvbWUnKSB7CiAgICAgICAgICAgICAgICB0b3RhbCArPSArci5hbW91bnQ7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gdG90YWw7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgfSksCiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFsncmdiYSgyNTUsIDk5LCAxMzIsIDAuMiknLCAncmdiYSg1NCwgMTYyLCAyMzUsIDAuMiknLCAncmdiYSgyNTUsIDIwNiwgODYsIDAuMiknLCAncmdiYSg3NSwgMTkyLCAxOTIsIDAuMiknLCAncmdiYSgxNTMsIDEwMiwgMjU1LCAwLjIpJywgJ3JnYmEoMjU1LCAxNTksIDY0LCAwLjIpJ10sCiAgICAgICAgICBib3JkZXJDb2xvcjogWydyZ2JhKDI1NSwgOTksIDEzMiwgMSknLCAncmdiYSg1NCwgMTYyLCAyMzUsIDEpJywgJ3JnYmEoMjU1LCAyMDYsIDg2LCAxKScsICdyZ2JhKDc1LCAxOTIsIDE5MiwgMSknLCAncmdiYSgxNTMsIDEwMiwgMjU1LCAxKScsICdyZ2JhKDI1NSwgMTU5LCA2NCwgMSknXSwKICAgICAgICAgIGJvcmRlcldpZHRoOiAyCiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["History.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAA,eAAA,MAAA,2BAAA;AACA,OAAA,YAAA,MAAA,2BAAA;AACA,SAAA,GAAA,QAAA,aAAA;AACA,OAAA,cAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,QADA,sBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,KAAA,MAAA,CAAA,cAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,IAAA,EAAA,SANA;AAOA,aAAA,GAPA;AAQA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GARA;AAWA,EAAA,MAAA,EAAA,CAAA,eAAA,CAXA;AAYA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,OAAA,EAAA,IADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,cAAA,CAAA,MAAA,CAHA;AAIA,MAAA,IAAA,EAAA,cAAA,CAAA,MAAA;AAJA,KAAA;AAAA,GAZA;AAkBA,EAAA,OAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAmBA,KAAA,MAAA,CAAA,QAAA,CAAA,cAAA,CAnBA;;AAAA;AAmBA,iBAAA,OAnBA;AAAA;AAAA,4CAoBA,KAAA,MAAA,CAAA,QAAA,CAAA,iBAAA,CApBA;;AAAA;AAoBA,YAAA,UApBA;AAsBA,iBAAA,KAAA,CAAA,UAAA;AAEA,iBAAA,OAAA,GAAA,KAAA;;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,iBACA,UADA,EACA;AAAA;;AACA,WAAA,eAAA,CAAA,KAAA,OAAA,CAAA,GAAA,CAAA,UAAA,MAAA,EAAA;AACA,iCACA,MADA;AAEA,UAAA,YAAA,EAAA,UAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,mBAAA,CAAA,CAAA,EAAA,KAAA,MAAA,CAAA,UAAA;AAAA,WAAA,EAAA,KAFA;AAGA,UAAA,SAAA,EAAA,MAAA,CAAA,IAAA,KAAA,QAAA,GAAA,OAAA,GAAA,KAHA;AAIA,UAAA,QAAA,EAAA,MAAA,CAAA,IAAA,KAAA,QAAA,GAAA,cAAA,CAAA,QAAA,CAAA,GAAA,cAAA,CAAA,SAAA;AAJA;AAMA,OAPA,CAAA;AASA,WAAA,WAAA,CAAA;AACA,QAAA,MAAA,EAAA,UAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,KAAA;AAAA,SAAA,CADA;AAEA,QAAA,QAAA,EAAA,CAAA;AACA,UAAA,KAAA,EAAA,cAAA,CAAA,mBAAA,CADA;AAEA,UAAA,IAAA,EAAA,UAAA,CAAA,GAAA,CAAA,UAAA,CAAA,EAAA;AACA,mBAAA,KAAA,CAAA,OAAA,CAAA,MAAA,CAAA,UAAA,KAAA,EAAA,CAAA,EAAA;AACA,kBAAA,CAAA,CAAA,UAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,CAAA,IAAA,KAAA,SAAA,EAAA;AACA,gBAAA,KAAA,IAAA,CAAA,CAAA,CAAA,MAAA;AACA;;AACA,qBAAA,KAAA;AACA,aALA,EAKA,CALA,CAAA;AAMA,WAPA,CAFA;AAUA,UAAA,eAAA,EAAA,CACA,yBADA,EAEA,yBAFA,EAGA,yBAHA,EAIA,yBAJA,EAKA,0BALA,EAMA,yBANA,CAVA;AAkBA,UAAA,WAAA,EAAA,CACA,uBADA,EAEA,uBAFA,EAGA,uBAHA,EAIA,uBAJA,EAKA,wBALA,EAMA,uBANA,CAlBA;AA0BA,UAAA,WAAA,EAAA;AA1BA,SAAA;AAFA,OAAA;AA+BA;AA1CA;AA1BA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <h3>{{'Menu_History' | localize}}</h3>\n    </div>\n\n    <div class=\"history-chart\">\n      <canvas ref=\"canvas\"></canvas>\n    </div>\n\n    <Loader v-if=\"loading\" />\n\n    <p class=\"center\" v-else-if=\"!records.length\">{{'No_posts_yet' | localize}} <router-link to=\"/record\">{{'Add_New_Entry' | localize}}</router-link></p>\n\n    <section class=\"table-wrapper\" v-else>\n      <HistoryTable :records=\"items\" />\n\n      <Paginate\n        v-model=\"page\"\n        :page-count=\"pageCount\"\n        :click-handler=\"pageChangeHandler\"\n        :prev-text=\"prev\"\n        :next-text=\"next\"\n        :container-class=\"'pagination'\"\n        :page-class=\"'waves-effect'\"\n      />\n    </section>\n  </div>\n</template>\n\n<script>\nimport paginationMixin from '@/mixins/pagination.mixin'\nimport HistoryTable from '@/components/HistoryTable'\nimport {Pie} from 'vue-chartjs'\nimport localizeFilter from '@/filters/localize.filter'\n\nexport default {\n  metaInfo() {\n      return {\n          title: this.$title('Menu_History')\n      }\n  },\n  name: 'history',\n  extends: Pie,\n  components: {\n    HistoryTable\n  },\n  mixins: [paginationMixin],\n  data: () => ({\n    loading: true,\n    records: [],\n    prev: localizeFilter('Prev'),\n    next: localizeFilter('Next')\n  }),\n  async mounted() {\n    this.records = await this.$store.dispatch('fetchRecords')\n    const categories = await this.$store.dispatch('fetchCategories')\n\n    this.setup(categories)\n\n    this.loading = false\n  },\n  methods: {\n    setup(categories) {\n      this.setupPagination(this.records.map(record => {\n        return {  \n          ...record,\n          categoryName: categories.find(c => c.id === record.categoryId).title,\n          typeClass: record.type === 'income' ? 'green' : 'red',\n          typeText: record.type === 'income' ? localizeFilter('Income') : localizeFilter('Outcome')\n        }\n      }))\n\n      this.renderChart({\n        labels: categories.map(c => c.title),\n        datasets: [{\n            label: localizeFilter('Costs_by_Ñategory'),\n            data: categories.map(c => {\n              return this.records.reduce((total, r) => {\n                if (r.categoryId === c.id && r.type === 'outcome') {\n                  total += +r.amount\n                }\n                return total\n              }, 0)\n            }),\n            backgroundColor: [\n                'rgba(255, 99, 132, 0.2)',\n                'rgba(54, 162, 235, 0.2)',\n                'rgba(255, 206, 86, 0.2)',\n                'rgba(75, 192, 192, 0.2)',\n                'rgba(153, 102, 255, 0.2)',\n                'rgba(255, 159, 64, 0.2)'\n            ],\n            borderColor: [\n                'rgba(255, 99, 132, 1)',\n                'rgba(54, 162, 235, 1)',\n                'rgba(255, 206, 86, 1)',\n                'rgba(75, 192, 192, 1)',\n                'rgba(153, 102, 255, 1)',\n                'rgba(255, 159, 64, 1)'\n            ],\n            borderWidth: 2\n        }]\n      })\n    }\n  }\n} \n</script>\n\n<style lang=\"scss\">\n.pagination li.active {\n  background: #26a69a;\n}\n.table-wrapper {\n  overflow-y: auto;\n}\n</style>"],"sourceRoot":"src/views"}]}