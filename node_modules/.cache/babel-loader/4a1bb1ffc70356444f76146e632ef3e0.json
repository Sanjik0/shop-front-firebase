{"remainingRequest":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/babel-loader/lib/index.js!/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sanzhar/Public/Projects/Vue Projects/shop/src/components/CategoryEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/src/components/CategoryEdit.vue","mtime":1590334256707},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHJlcXVpcmVkLCBtaW5WYWx1ZSB9IGZyb20gJ3Z1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgY2F0ZWdvcmllczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWxlY3Q6IG51bGwsCiAgICAgIHRpdGxlOiAnJywKICAgICAgbGltaXQ6IDEwMCwKICAgICAgY3VycmVudDogbnVsbAogICAgfTsKICB9LAogIHZhbGlkYXRpb25zOiB7CiAgICB0aXRsZTogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBsaW1pdDogewogICAgICBtaW5WYWx1ZTogbWluVmFsdWUoMTAwKQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGN1cnJlbnQ6IGZ1bmN0aW9uIGN1cnJlbnQoY2F0SWQpIHsKICAgICAgdmFyIF90aGlzJGNhdGVnb3JpZXMkZmluZCA9IHRoaXMuY2F0ZWdvcmllcy5maW5kKGZ1bmN0aW9uIChjYXRlZ29yeSkgewogICAgICAgIHJldHVybiBjYXRlZ29yeS5pZCA9PT0gY2F0SWQ7CiAgICAgIH0pLAogICAgICAgICAgdGl0bGUgPSBfdGhpcyRjYXRlZ29yaWVzJGZpbmQudGl0bGUsCiAgICAgICAgICBsaW1pdCA9IF90aGlzJGNhdGVnb3JpZXMkZmluZC5saW1pdDsKCiAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTsKICAgICAgdGhpcy5saW1pdCA9IGxpbWl0OwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyRjYXRlZ29yaWVzJCA9IHRoaXMuY2F0ZWdvcmllc1swXSwKICAgICAgICBpZCA9IF90aGlzJGNhdGVnb3JpZXMkLmlkLAogICAgICAgIHRpdGxlID0gX3RoaXMkY2F0ZWdvcmllcyQudGl0bGUsCiAgICAgICAgbGltaXQgPSBfdGhpcyRjYXRlZ29yaWVzJC5saW1pdDsKICAgIHRoaXMuY3VycmVudCA9IGlkOwogICAgdGhpcy50aXRsZSA9IHRpdGxlOwogICAgdGhpcy5saW1pdCA9IGxpbWl0OwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0SGFuZGxlcjogZnVuY3Rpb24gc3VibWl0SGFuZGxlcigpIHsKICAgICAgdmFyIGNhdGVnb3J5RGF0YTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzdWJtaXRIYW5kbGVyJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIXRoaXMuJHYuJGludmFsaWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgIGNhdGVnb3J5RGF0YSA9IHsKICAgICAgICAgICAgICAgIGlkOiB0aGlzLmN1cnJlbnQsCiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVDYXRlZ29yeScsIGNhdGVnb3J5RGF0YSkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoJ9Ca0LDRgtC10LPQvtGA0LjRjyDRg9GB0L/QtdGI0L3QviDQuNC30LzQtdC90LXQvdCwJyk7CiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlZCcsIGNhdGVnb3J5RGF0YSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMsIFtbMywgMTFdXSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgTS51cGRhdGVUZXh0RmllbGRzKCk7CiAgICB0aGlzLnNlbGVjdCA9IE0uRm9ybVNlbGVjdC5pbml0KHRoaXMuJHJlZnMuc2VsZWN0KTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgaWYgKHRoaXMuc2VsZWN0ICYmIHRoaXMuc2VsZWN0LmRlc3Ryb3llZCkgewogICAgICB0aGlzLnNlbGVjdC5kZXN0cm95ZWQoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["CategoryEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA,SAAA,QAAA,EAAA,QAAA,QAAA,0BAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,GAHA;AAIA,MAAA,OAAA,EAAA;AAJA,KAAA;AAAA,GAPA;AAaA,EAAA,WAAA,EAAA;AACA,IAAA,KAAA,EAAA;AAAA,MAAA,QAAA,EAAA;AAAA,KADA;AAEA,IAAA,KAAA,EAAA;AAAA,MAAA,QAAA,EAAA,QAAA,CAAA,GAAA;AAAA;AAFA,GAbA;AAiBA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,KADA,EACA;AAAA,kCACA,KAAA,UAAA,CAAA,IAAA,CAAA,UAAA,QAAA;AAAA,eAAA,QAAA,CAAA,EAAA,KAAA,KAAA;AAAA,OAAA,CADA;AAAA,UACA,KADA,yBACA,KADA;AAAA,UACA,KADA,yBACA,KADA;;AAEA,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,KAAA,GAAA,KAAA;AACA;AALA,GAjBA;AAwBA,EAAA,OAxBA,qBAwBA;AAAA,4BACA,KAAA,UAAA,CAAA,CAAA,CADA;AAAA,QACA,EADA,qBACA,EADA;AAAA,QACA,KADA,qBACA,KADA;AAAA,QACA,KADA,qBACA,KADA;AAEA,SAAA,OAAA,GAAA,EAAA;AACA,SAAA,KAAA,GAAA,KAAA;AACA,SAAA,KAAA,GAAA,KAAA;AACA,GA7BA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,aADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEA,KAAA,EAAA,CAAA,QAFA;AAAA;AAAA;AAAA;;AAGA,mBAAA,EAAA,CAAA,MAAA;AAHA;;AAAA;AAAA;AAQA,cAAA,YARA,GAQA;AACA,gBAAA,EAAA,EAAA,KAAA,OADA;AAEA,gBAAA,KAAA,EAAA,KAAA,KAFA;AAGA,gBAAA,KAAA,EAAA,KAAA;AAHA,eARA;AAAA;AAAA,8CAaA,KAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,YAAA,CAbA;;AAAA;AAcA,mBAAA,QAAA,CAAA,4BAAA;AACA,mBAAA,KAAA,CAAA,SAAA,EAAA,YAAA;AAfA;AAAA;;AAAA;AAAA;AAAA;AAiBA,cAAA,OAAA,CAAA,GAAA,CAAA,CAAA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GA9BA;AAmDA,EAAA,OAnDA,qBAmDA;AACA,IAAA,CAAA,CAAA,gBAAA;AACA,SAAA,MAAA,GAAA,CAAA,CAAA,UAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,MAAA,CAAA;AACA,GAtDA;AAuDA,EAAA,SAvDA,uBAuDA;AACA,QAAA,KAAA,MAAA,IAAA,KAAA,MAAA,CAAA,SAAA,EAAA;AACA,WAAA,MAAA,CAAA,SAAA;AACA;AACA;AA3DA,CAAA","sourcesContent":["<template>\n    <div class=\"col s12 m6\">\n        <div>\n            <div class=\"page-subtitle\">\n                <h4>{{'Edit' | localize}}</h4>\n            </div>\n\n            <form @submit.prevent=\"submitHandler\">\n                <div class=\"input-field\" >\n                    <select ref=\"select\" v-model=\"current\">\n                        <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\n                            {{category.title}}\n                        </option>\n                    </select>\n                    <label>{{'Select_Category' | localize}}</label>\n                </div>\n\n                <div class=\"input-field\">\n                    <input\n                        id=\"name\"\n                        type=\"text\"\n                        v-model=\"title\"\n                        :class=\"{invalid: $v.title.$dirty && !$v.title.required}\"\n                    >\n                    <label for=\"name\">{{'Title' | localize}}</label>\n                    <span \n                        v-if=\"$v.title.$dirty && !$v.title.required\"\n                        class=\"helper-text invalid\"\n                    >\n                        {{'Enter_category' | localize}}\n                    </span>\n                </div>\n\n                <div class=\"input-field\">\n                    <input\n                        id=\"limit\"\n                        type=\"number\"\n                        v-model.number=\"limit\"\n                        :class=\"{invalid: $v.limit.$dirty && !$v.limit.minValue}\"\n                    >\n                    <label for=\"limit\">{{'Limit' | localize}}</label>\n                    <span \n                        class=\"helper-text invalid\"\n                        v-if=\"$v.limit.$dirty && !$v.limit.minValue\"\n                    >\n                        {{'Minimum_value' | localize}} {{$v.limit.$params.minValue.min}}\n                    </span>\n                </div>\n\n                <button class=\"btn waves-effect waves-light\" style=\"background: #4fc3f7\" type=\"submit\">\n                {{'Update' | localize}}\n                <i class=\"material-icons right\">send</i>\n                </button>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport  {required, minValue} from 'vuelidate/lib/validators'\n\nexport default {\n    props: {\n        categories: {\n            type: Array,\n            required: true\n        }\n    },\n    data:() => ({\n        select: null,\n        title: '',\n        limit: 100,\n        current: null\n    }), \n    validations: {\n        title: {required},\n        limit: {minValue: minValue(100)}\n    },\n    watch: {\n        current(catId) {\n            const {title, limit} = this.categories.find(category => category.id === catId)\n            this.title = title\n            this.limit = limit\n        }\n    },\n    created () {\n        const {id, title, limit} = this.categories[0]\n        this.current = id\n        this.title = title\n        this.limit = limit\n    },\n    methods: {\n        async submitHandler() {\n            if (this.$v.$invalid) {\n                this.$v.$touch()\n                return\n            }\n\n            try {\n                const categoryData = {\n                    id: this.current,\n                    title: this.title,\n                    limit: this.limit\n                }\n                await this.$store.dispatch('updateCategory', categoryData)   \n                this.$message('Категория успешно изменена')\n                this.$emit('updated', categoryData)\n            } catch (error) {\n                console.log(e)\n            }\n        }\n    },\n    mounted () {\n        M.updateTextFields()\n        this.select = M.FormSelect.init(this.$refs.select);\n    },\n    destroyed() {\n        if (this.select && this.select.destroyed) {\n            this.select.destroyed()\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@media (max-width: 400px) {\n  .page-subtitle {\n      margin-top: 2rem;\n      h4 {\n          font-size: 1.75rem;\n          margin-bottom: 1rem;\n      }\n  }\n}\n</style>"],"sourceRoot":"src/components"}]}