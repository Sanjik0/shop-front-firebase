{"remainingRequest":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/babel-loader/lib/index.js!/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/Income.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/Income.vue","mtime":1589404050016},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0aWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9ob21lL3NhbnpoYXIvUHVibGljL1Byb2plY3RzL1Z1ZSBQcm9qZWN0cy9zaG9wL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgSW5jb21lVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL0luY29tZVRhYmxlJzsKaW1wb3J0IHBhZ2luYXRpb25NaXhpbiBmcm9tICdAL21peGlucy9wYWdpbmF0aW9uLm1peGluJzsKaW1wb3J0IHsgTGluZSB9IGZyb20gJ3Z1ZS1jaGFydGpzJzsKaW1wb3J0IGxvY2FsaXplRmlsdGVyIGZyb20gJ0AvZmlsdGVycy9sb2NhbGl6ZS5maWx0ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbWV0YUluZm86IGZ1bmN0aW9uIG1ldGFJbmZvKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6IHRoaXMuJHRpdGxlKCdJbmNvbWVzJykKICAgIH07CiAgfSwKICBuYW1lOiAnaW5jb21lJywKICAiZXh0ZW5kcyI6IExpbmUsCiAgY29tcG9uZW50czogewogICAgSW5jb21lVGFibGU6IEluY29tZVRhYmxlCiAgfSwKICBtaXhpbnM6IFtwYWdpbmF0aW9uTWl4aW5dLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICByZWNvcmRzOiBbXSwKICAgICAgcHJldjogbG9jYWxpemVGaWx0ZXIoJ1ByZXYnKSwKICAgICAgbmV4dDogbG9jYWxpemVGaWx0ZXIoJ05leHQnKQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgcmVjb3JkcywgY2F0ZWdvcmllczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbW91bnRlZCQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdmZXRjaFJlY29yZHMnKSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZWNvcmRzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgdGhpcy5yZWNvcmRzID0gcmVjb3Jkcy5maWx0ZXIoZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgICAgICAgIHJldHVybiByZWNvcmQudHlwZSA9PT0gJ2luY29tZSc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZmV0Y2hDYXRlZ29yaWVzJykpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2F0ZWdvcmllcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHRoaXMuc2V0dXAoY2F0ZWdvcmllcyk7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBudWxsLCB0aGlzKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldHVwOiBmdW5jdGlvbiBzZXR1cChjYXRlZ29yaWVzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnNldHVwUGFnaW5hdGlvbih0aGlzLnJlY29yZHMubWFwKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgcmVjb3JkLCB7CiAgICAgICAgICBjYXRlZ29yeU5hbWU6IGNhdGVnb3JpZXMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgICByZXR1cm4gYy5pZCA9PT0gcmVjb3JkLmNhdGVnb3J5SWQ7CiAgICAgICAgICB9KS50aXRsZQogICAgICAgIH0pOwogICAgICB9KSk7CiAgICAgIHRoaXMucmVuZGVyQ2hhcnQoewogICAgICAgIGxhYmVsczogY2F0ZWdvcmllcy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLnRpdGxlOwogICAgICAgIH0pLAogICAgICAgIGRhdGFzZXRzOiBbewogICAgICAgICAgbGFiZWw6IGxvY2FsaXplRmlsdGVyKCdJbmNvbWVfY2F0ZWdvcmllcycpLAogICAgICAgICAgZGF0YTogY2F0ZWdvcmllcy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlY29yZHMucmVkdWNlKGZ1bmN0aW9uICh0b3RhbCwgcikgewogICAgICAgICAgICAgIGlmIChyLmNhdGVnb3J5SWQgPT09IGMuaWQgJiYgci50eXBlID09PSAnaW5jb21lJykgewogICAgICAgICAgICAgICAgdG90YWwgKz0gK3IuYW1vdW50OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsOwogICAgICAgICAgICB9LCAwKTsKICAgICAgICAgIH0pLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBbJ3JnYmEoMCwgMjA0LCAxMDIsIDAuMiknLCAncmdiYSgwLCAyMDQsIDEwMiwgMC4yKScsICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywgJ3JnYmEoMCwgMjA0LCAxMDIsIDAuMiknLCAncmdiYSgwLCAyMDQsIDEwMiwgMC4yKScsICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywgJ3JnYmEoMCwgMjA0LCAxMDIsIDAuMiknLCAncmdiYSgwLCAyMDQsIDEwMiwgMC4yKScsICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywgJ3JnYmEoMCwgMjA0LCAxMDIsIDAuMiknLCAncmdiYSgwLCAyMDQsIDEwMiwgMC4yKSddLAogICAgICAgICAgYm9yZGVyQ29sb3I6IFsncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknLCAncmdiYSgwLCAyMDQsIDEwMiwgMSknXSwKICAgICAgICAgIGJvcmRlcldpZHRoOiAyCiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Income.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <div class=\"page-title\">\n            <h3>{{'Incomes' | localize}}</h3>\n        </div>\n\n        <div class=\"income-canvas\">\n            <canvas ref=\"canvas\"></canvas>\n        </div>\n\n        <Loader v-if=\"loading\" />\n\n        <p class=\"center\" v-else-if=\"!records.length\">{{'No_posts_yet' | localize}} <router-link to=\"/record\">{{'Add_New_Entry' | localize}}</router-link></p>\n            \n        <section class=\"table-wrapper\" v-else>\n            <IncomeTable :records=\"items\" />\n\n            <Paginate\n                v-model=\"page\"\n                :page-count=\"pageCount\"\n                :click-handler=\"pageChangeHandler\"\n                :prev-text=\"prev\"\n                :next-text=\"next\"\n                :container-class=\"'pagination'\"\n                :page-class=\"'waves-effect'\"\n            />\n        </section>\n    </div>\n</template>\n\n<script>\nimport IncomeTable from '@/components/IncomeTable'\nimport paginationMixin from '@/mixins/pagination.mixin'\nimport {Line} from 'vue-chartjs'\nimport localizeFilter from '@/filters/localize.filter'\n\nexport default {\n  metaInfo() {\n      return {\n        title: this.$title('Incomes')\n      }\n  },\n  name: 'income',\n  extends: Line, \n  components: {\n    IncomeTable\n  },\n  mixins: [paginationMixin],\n  data: () => ({\n    loading: true,\n    records: [],\n    prev: localizeFilter('Prev'),\n    next: localizeFilter('Next')\n  }),\n  async mounted() {\n    const records = await this.$store.dispatch('fetchRecords')\n    this.records = records.filter(record => record.type === 'income')\n\n    const categories = await this.$store.dispatch('fetchCategories')\n\n    this.setup(categories)\n\n    this.loading = false\n  },\n  methods: {\n    setup(categories) {\n      this.setupPagination(this.records.map(record => {\n        return {  \n            ...record,\n            categoryName: categories.find(c => c.id === record.categoryId).title\n        }\n      }))\n\n      this.renderChart({\n        labels: categories.map(c => c.title),\n        datasets: [{\n            label: localizeFilter('Income_categories'),\n            data: categories.map(c => {\n              return this.records.reduce((total, r) => {\n                if (r.categoryId === c.id && r.type === 'income') {\n                  total += +r.amount\n                }\n                return total\n              }, 0)\n            }),\n            backgroundColor: [\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n            ],\n            borderColor: [\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n            ],\n            borderWidth: 2\n        }]\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.income-canvas {\n    max-width: 80%;\n    margin: 0 auto;\n}\n.table-wrapper {\n  overflow-y: auto;\n}\n</style>"],"sourceRoot":"src/views"}]}