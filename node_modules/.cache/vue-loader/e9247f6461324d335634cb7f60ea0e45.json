{"remainingRequest":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/Income.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/Income.vue","mtime":1589404050016},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJbmNvbWVUYWJsZSBmcm9tICdAL2NvbXBvbmVudHMvSW5jb21lVGFibGUnCmltcG9ydCBwYWdpbmF0aW9uTWl4aW4gZnJvbSAnQC9taXhpbnMvcGFnaW5hdGlvbi5taXhpbicKaW1wb3J0IHtMaW5lfSBmcm9tICd2dWUtY2hhcnRqcycKaW1wb3J0IGxvY2FsaXplRmlsdGVyIGZyb20gJ0AvZmlsdGVycy9sb2NhbGl6ZS5maWx0ZXInCgpleHBvcnQgZGVmYXVsdCB7CiAgbWV0YUluZm8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGl0bGU6IHRoaXMuJHRpdGxlKCdJbmNvbWVzJykKICAgICAgfQogIH0sCiAgbmFtZTogJ2luY29tZScsCiAgZXh0ZW5kczogTGluZSwgCiAgY29tcG9uZW50czogewogICAgSW5jb21lVGFibGUKICB9LAogIG1peGluczogW3BhZ2luYXRpb25NaXhpbl0sCiAgZGF0YTogKCkgPT4gKHsKICAgIGxvYWRpbmc6IHRydWUsCiAgICByZWNvcmRzOiBbXSwKICAgIHByZXY6IGxvY2FsaXplRmlsdGVyKCdQcmV2JyksCiAgICBuZXh0OiBsb2NhbGl6ZUZpbHRlcignTmV4dCcpCiAgfSksCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIGNvbnN0IHJlY29yZHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZmV0Y2hSZWNvcmRzJykKICAgIHRoaXMucmVjb3JkcyA9IHJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiByZWNvcmQudHlwZSA9PT0gJ2luY29tZScpCgogICAgY29uc3QgY2F0ZWdvcmllcyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdmZXRjaENhdGVnb3JpZXMnKQoKICAgIHRoaXMuc2V0dXAoY2F0ZWdvcmllcykKCiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogIH0sCiAgbWV0aG9kczogewogICAgc2V0dXAoY2F0ZWdvcmllcykgewogICAgICB0aGlzLnNldHVwUGFnaW5hdGlvbih0aGlzLnJlY29yZHMubWFwKHJlY29yZCA9PiB7CiAgICAgICAgcmV0dXJuIHsgIAogICAgICAgICAgICAuLi5yZWNvcmQsCiAgICAgICAgICAgIGNhdGVnb3J5TmFtZTogY2F0ZWdvcmllcy5maW5kKGMgPT4gYy5pZCA9PT0gcmVjb3JkLmNhdGVnb3J5SWQpLnRpdGxlCiAgICAgICAgfQogICAgICB9KSkKCiAgICAgIHRoaXMucmVuZGVyQ2hhcnQoewogICAgICAgIGxhYmVsczogY2F0ZWdvcmllcy5tYXAoYyA9PiBjLnRpdGxlKSwKICAgICAgICBkYXRhc2V0czogW3sKICAgICAgICAgICAgbGFiZWw6IGxvY2FsaXplRmlsdGVyKCdJbmNvbWVfY2F0ZWdvcmllcycpLAogICAgICAgICAgICBkYXRhOiBjYXRlZ29yaWVzLm1hcChjID0+IHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNvcmRzLnJlZHVjZSgodG90YWwsIHIpID0+IHsKICAgICAgICAgICAgICAgIGlmIChyLmNhdGVnb3J5SWQgPT09IGMuaWQgJiYgci50eXBlID09PSAnaW5jb21lJykgewogICAgICAgICAgICAgICAgICB0b3RhbCArPSArci5hbW91bnQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbAogICAgICAgICAgICAgIH0sIDApCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFsKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAwLjIpJywKICAgICAgICAgICAgXSwKICAgICAgICAgICAgYm9yZGVyQ29sb3I6IFsKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAxKScsCiAgICAgICAgICAgICAgICAncmdiYSgwLCAyMDQsIDEwMiwgMSknLAogICAgICAgICAgICAgICAgJ3JnYmEoMCwgMjA0LCAxMDIsIDEpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAxKScsCiAgICAgICAgICAgICAgICAncmdiYSgwLCAyMDQsIDEwMiwgMSknLAogICAgICAgICAgICAgICAgJ3JnYmEoMCwgMjA0LCAxMDIsIDEpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAxKScsCiAgICAgICAgICAgICAgICAncmdiYSgwLCAyMDQsIDEwMiwgMSknLAogICAgICAgICAgICAgICAgJ3JnYmEoMCwgMjA0LCAxMDIsIDEpJywKICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIwNCwgMTAyLCAxKScsCiAgICAgICAgICAgICAgICAncmdiYSgwLCAyMDQsIDEwMiwgMSknLAogICAgICAgICAgICBdLAogICAgICAgICAgICBib3JkZXJXaWR0aDogMgogICAgICAgIH1dCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Income.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Income.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <div class=\"page-title\">\n            <h3>{{'Incomes' | localize}}</h3>\n        </div>\n\n        <div class=\"income-canvas\">\n            <canvas ref=\"canvas\"></canvas>\n        </div>\n\n        <Loader v-if=\"loading\" />\n\n        <p class=\"center\" v-else-if=\"!records.length\">{{'No_posts_yet' | localize}} <router-link to=\"/record\">{{'Add_New_Entry' | localize}}</router-link></p>\n            \n        <section class=\"table-wrapper\" v-else>\n            <IncomeTable :records=\"items\" />\n\n            <Paginate\n                v-model=\"page\"\n                :page-count=\"pageCount\"\n                :click-handler=\"pageChangeHandler\"\n                :prev-text=\"prev\"\n                :next-text=\"next\"\n                :container-class=\"'pagination'\"\n                :page-class=\"'waves-effect'\"\n            />\n        </section>\n    </div>\n</template>\n\n<script>\nimport IncomeTable from '@/components/IncomeTable'\nimport paginationMixin from '@/mixins/pagination.mixin'\nimport {Line} from 'vue-chartjs'\nimport localizeFilter from '@/filters/localize.filter'\n\nexport default {\n  metaInfo() {\n      return {\n        title: this.$title('Incomes')\n      }\n  },\n  name: 'income',\n  extends: Line, \n  components: {\n    IncomeTable\n  },\n  mixins: [paginationMixin],\n  data: () => ({\n    loading: true,\n    records: [],\n    prev: localizeFilter('Prev'),\n    next: localizeFilter('Next')\n  }),\n  async mounted() {\n    const records = await this.$store.dispatch('fetchRecords')\n    this.records = records.filter(record => record.type === 'income')\n\n    const categories = await this.$store.dispatch('fetchCategories')\n\n    this.setup(categories)\n\n    this.loading = false\n  },\n  methods: {\n    setup(categories) {\n      this.setupPagination(this.records.map(record => {\n        return {  \n            ...record,\n            categoryName: categories.find(c => c.id === record.categoryId).title\n        }\n      }))\n\n      this.renderChart({\n        labels: categories.map(c => c.title),\n        datasets: [{\n            label: localizeFilter('Income_categories'),\n            data: categories.map(c => {\n              return this.records.reduce((total, r) => {\n                if (r.categoryId === c.id && r.type === 'income') {\n                  total += +r.amount\n                }\n                return total\n              }, 0)\n            }),\n            backgroundColor: [\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n            ],\n            borderColor: [\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n            ],\n            borderWidth: 2\n        }]\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.income-canvas {\n    max-width: 80%;\n    margin: 0 auto;\n}\n.table-wrapper {\n  overflow-y: auto;\n}\n</style>"]}]}