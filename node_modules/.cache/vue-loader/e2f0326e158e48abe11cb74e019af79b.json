{"remainingRequest":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/History.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/History.vue","mtime":1589404050016},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucGFnaW5hdGlvbiBsaS5hY3RpdmUgewogIGJhY2tncm91bmQ6ICMyNmE2OWE7Cn0KLnRhYmxlLXdyYXBwZXIgewogIG92ZXJmbG93LXk6IGF1dG87Cn0K"},{"version":3,"sources":["History.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA","file":"History.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <h3>{{'Menu_History' | localize}}</h3>\n    </div>\n\n    <div class=\"history-chart\">\n      <canvas ref=\"canvas\"></canvas>\n    </div>\n\n    <Loader v-if=\"loading\" />\n\n    <p class=\"center\" v-else-if=\"!records.length\">{{'No_posts_yet' | localize}} <router-link to=\"/record\">{{'Add_New_Entry' | localize}}</router-link></p>\n\n    <section class=\"table-wrapper\" v-else>\n      <HistoryTable :records=\"items\" />\n\n      <Paginate\n        v-model=\"page\"\n        :page-count=\"pageCount\"\n        :click-handler=\"pageChangeHandler\"\n        :prev-text=\"prev\"\n        :next-text=\"next\"\n        :container-class=\"'pagination'\"\n        :page-class=\"'waves-effect'\"\n      />\n    </section>\n  </div>\n</template>\n\n<script>\nimport paginationMixin from '@/mixins/pagination.mixin'\nimport HistoryTable from '@/components/HistoryTable'\nimport {Pie} from 'vue-chartjs'\nimport localizeFilter from '@/filters/localize.filter'\n\nexport default {\n  metaInfo() {\n      return {\n          title: this.$title('Menu_History')\n      }\n  },\n  name: 'history',\n  extends: Pie,\n  components: {\n    HistoryTable\n  },\n  mixins: [paginationMixin],\n  data: () => ({\n    loading: true,\n    records: [],\n    prev: localizeFilter('Prev'),\n    next: localizeFilter('Next')\n  }),\n  async mounted() {\n    this.records = await this.$store.dispatch('fetchRecords')\n    const categories = await this.$store.dispatch('fetchCategories')\n\n    this.setup(categories)\n\n    this.loading = false\n  },\n  methods: {\n    setup(categories) {\n      this.setupPagination(this.records.map(record => {\n        return {  \n          ...record,\n          categoryName: categories.find(c => c.id === record.categoryId).title,\n          typeClass: record.type === 'income' ? 'green' : 'red',\n          typeText: record.type === 'income' ? localizeFilter('Income') : localizeFilter('Outcome')\n        }\n      }))\n\n      this.renderChart({\n        labels: categories.map(c => c.title),\n        datasets: [{\n            label: localizeFilter('Costs_by_сategory'),\n            data: categories.map(c => {\n              return this.records.reduce((total, r) => {\n                if (r.categoryId === c.id && r.type === 'outcome') {\n                  total += +r.amount\n                }\n                return total\n              }, 0)\n            }),\n            backgroundColor: [\n                'rgba(255, 99, 132, 0.2)',\n                'rgba(54, 162, 235, 0.2)',\n                'rgba(255, 206, 86, 0.2)',\n                'rgba(75, 192, 192, 0.2)',\n                'rgba(153, 102, 255, 0.2)',\n                'rgba(255, 159, 64, 0.2)'\n            ],\n            borderColor: [\n                'rgba(255, 99, 132, 1)',\n                'rgba(54, 162, 235, 1)',\n                'rgba(255, 206, 86, 1)',\n                'rgba(75, 192, 192, 1)',\n                'rgba(153, 102, 255, 1)',\n                'rgba(255, 159, 64, 1)'\n            ],\n            borderWidth: 2\n        }]\n      })\n    }\n  }\n} \n</script>\n\n<style lang=\"scss\">\n.pagination li.active {\n  background: #26a69a;\n}\n.table-wrapper {\n  overflow-y: auto;\n}\n</style>"]}]}