{"remainingRequest":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/src/views/Record.vue?vue&type=style&index=0&id=4917ee8b&lang=scss&scoped=true&","dependencies":[{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/src/views/Record.vue","mtime":1590334179944},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop-firebase/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5mb3JtIHsKICBtYXJnaW46IDAgYXV0bzsKfQoucGFnZS10aXRsZSB7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Cn0KQG1lZGlhIChtYXgtd2lkdGg6IDQwMHB4KSB7CiAgLnBhZ2UtdGl0bGUgewogICAgbWFyZ2luLWJvdHRvbTogMnJlbTsKICB9CiAgLmlucHV0LWZpZWxkIHsKICAgIG1hcmdpbi10b3A6IDEuMjVyZW07CiAgfQp9Cg=="},{"version":3,"sources":["Record.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Record.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <h3>Добавление продукта</h3>\n    </div>\n\n    <Loader v-if=\"loading\" />\n    \n    <form class=\"form\" v-else @submit.prevent=\"handleSubmit\">\n      <div class=\"input-field\">\n        <input id=\"img\" type=\"text\" v-model=\"img\" :class=\"{invalid: $v.description.$dirty && !$v.description.required}\" />\n        <label for=\"img\">URL картинки</label>\n        <span \n            v-if=\"$v.description.$dirty && !$v.description.required\"\n            class=\"helper-text invalid\"\n        >\n            {{'Enter_description' | localize}}\n        </span>\n      </div>\n\n      <div class=\"input-field\">\n        <input id=\"title\" type=\"text\" v-model=\"title\" :class=\"{invalid: $v.description.$dirty && !$v.description.required}\" />\n        <label for=\"title\">Название</label>\n        <span \n            v-if=\"$v.description.$dirty && !$v.description.required\"\n            class=\"helper-text invalid\"\n        >\n            {{'Enter_description' | localize}}\n        </span>\n      </div>\n\n      <div class=\"input-field\">\n        <select ref=\"select\" v-model=\"category\">\n          <option v-for=\"cat in categories\" :key=\"cat.id\" :value=\"cat.id\">{{cat.title}}</option>\n        </select>\n        <label>{{'Select_Category' | localize}}</label>\n      </div>\n\n      <div class=\"input-field\">\n        <input id=\"amount\" type=\"number\" v-model.number=\"amount\" :class=\"{invalid: $v.amount.$dirty && !$v.amount.minValue}\"/>\n        <label for=\"amount\">{{'Amount' | localize}}</label>\n        <span \n          class=\"helper-text invalid\"\n          v-if=\"$v.amount.$dirty && !$v.amount.minValue\"\n        >\n          {{'Minimum_value' | localize}} {{$v.amount.$params.minValue.min}}\n        </span>\n      </div>\n\n      <div class=\"input-field\">\n        <input id=\"description\" type=\"text\" v-model=\"description\" :class=\"{invalid: $v.description.$dirty && !$v.description.required}\" />\n        <label for=\"description\">{{'Description' | localize}}</label>\n        <span \n            v-if=\"$v.description.$dirty && !$v.description.required\"\n            class=\"helper-text invalid\"\n        >\n            {{'Enter_description' | localize}}\n        </span>\n      </div>\n\n      <button class=\"btn waves-effect waves-light\" style=\"background: #4fc3f7\" type=\"submit\">\n        {{'Create' | localize}}\n        <i class=\"material-icons right\">send</i>\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport  {required, minValue} from 'vuelidate/lib/validators'\nimport {mapGetters} from 'vuex'\n\nexport default {\n  metaInfo() {\n      return {\n          title: this.$title('Menu_NewRecord')\n      }\n  },\n  name: 'record',\n  data: () => ({\n    loading: true,\n    select: '',\n    img: '',\n    title: '',\n    categories: [],\n    category: null,\n    amount: 1,\n    description: ''\n  }),\n  validations: {\n      amount: {minValue: minValue(1)},\n      description: {required}\n  },\n  async mounted() {\n    this.categories = await this.$store.dispatch('fetchCategories')\n    this.loading = false\n\n    if(this.categories.length) {\n      this.category = this.categories[0].id\n    }\n\n    setTimeout(() => {\n      this.select = M.FormSelect.init(this.$refs.select)\n      M.updateTextFields()\n    }, 0)\n  },\n  computed: {\n    ...mapGetters(['info']),\n   },\n  methods: {\n    async handleSubmit() {\n      if (this.$v.$invalid) {\n          this.$v.$touch()\n          return\n      }\n      \n      try {\n        await this.$store.dispatch('createRecord', {\n          img: this.img,\n          title: this.title,\n          categoryId: this.category,\n          amount: this.amount,\n          description: this.description,\n          date: new Date().toJSON()\n        })\n        \n        await this.$store.dispatch(`updateInfo`)\n        this.$message('Запись успешно создана')\n        this.$v.$reset()\n        this.amount = 1\n        this.description = ''\n      } catch (e) {\n        console.log(e)\n      }\n    \n    }\n  },\n  destroyed() {\n    if (this.select && this.select.destroyed) {\n        this.select.destroyed()\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.form {\n  margin: 0 auto;\n}\n.page-title {\n  justify-content: center;\n}\n@media (max-width: 400px) {\n  .page-title {\n    margin-bottom: 2rem;\n  }\n  .input-field {\n    margin-top: 1.25rem;\n  }\n}\n</style>"]}]}