{"remainingRequest":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/Income.vue?vue&type=style&index=0&id=3f1e903a&lang=scss&scoped=true&","dependencies":[{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/Income.vue","mtime":1589404050016},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmluY29tZS1jYW52YXMgewogICAgbWF4LXdpZHRoOiA4MCU7CiAgICBtYXJnaW46IDAgYXV0bzsKfQoudGFibGUtd3JhcHBlciB7CiAgb3ZlcmZsb3cteTogYXV0bzsKfQo="},{"version":3,"sources":["Income.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Income.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <div class=\"page-title\">\n            <h3>{{'Incomes' | localize}}</h3>\n        </div>\n\n        <div class=\"income-canvas\">\n            <canvas ref=\"canvas\"></canvas>\n        </div>\n\n        <Loader v-if=\"loading\" />\n\n        <p class=\"center\" v-else-if=\"!records.length\">{{'No_posts_yet' | localize}} <router-link to=\"/record\">{{'Add_New_Entry' | localize}}</router-link></p>\n            \n        <section class=\"table-wrapper\" v-else>\n            <IncomeTable :records=\"items\" />\n\n            <Paginate\n                v-model=\"page\"\n                :page-count=\"pageCount\"\n                :click-handler=\"pageChangeHandler\"\n                :prev-text=\"prev\"\n                :next-text=\"next\"\n                :container-class=\"'pagination'\"\n                :page-class=\"'waves-effect'\"\n            />\n        </section>\n    </div>\n</template>\n\n<script>\nimport IncomeTable from '@/components/IncomeTable'\nimport paginationMixin from '@/mixins/pagination.mixin'\nimport {Line} from 'vue-chartjs'\nimport localizeFilter from '@/filters/localize.filter'\n\nexport default {\n  metaInfo() {\n      return {\n        title: this.$title('Incomes')\n      }\n  },\n  name: 'income',\n  extends: Line, \n  components: {\n    IncomeTable\n  },\n  mixins: [paginationMixin],\n  data: () => ({\n    loading: true,\n    records: [],\n    prev: localizeFilter('Prev'),\n    next: localizeFilter('Next')\n  }),\n  async mounted() {\n    const records = await this.$store.dispatch('fetchRecords')\n    this.records = records.filter(record => record.type === 'income')\n\n    const categories = await this.$store.dispatch('fetchCategories')\n\n    this.setup(categories)\n\n    this.loading = false\n  },\n  methods: {\n    setup(categories) {\n      this.setupPagination(this.records.map(record => {\n        return {  \n            ...record,\n            categoryName: categories.find(c => c.id === record.categoryId).title\n        }\n      }))\n\n      this.renderChart({\n        labels: categories.map(c => c.title),\n        datasets: [{\n            label: localizeFilter('Income_categories'),\n            data: categories.map(c => {\n              return this.records.reduce((total, r) => {\n                if (r.categoryId === c.id && r.type === 'income') {\n                  total += +r.amount\n                }\n                return total\n              }, 0)\n            }),\n            backgroundColor: [\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n                'rgba(0, 204, 102, 0.2)',\n            ],\n            borderColor: [\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n                'rgba(0, 204, 102, 1)',\n            ],\n            borderWidth: 2\n        }]\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.income-canvas {\n    max-width: 80%;\n    margin: 0 auto;\n}\n.table-wrapper {\n  overflow-y: auto;\n}\n</style>"]}]}