{"remainingRequest":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/Settings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/src/views/Settings.vue","mtime":1589404050020},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sanzhar/Public/Projects/Vue Projects/shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBsb2NhbGl6ZUZpbHRlciBmcm9tICdAL2ZpbHRlcnMvbG9jYWxpemUuZmlsdGVyJwppbXBvcnQgIHtyZXF1aXJlZCwgbWluVmFsdWV9IGZyb20gJ3Z1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycycKaW1wb3J0IHttYXBHZXR0ZXJzfSBmcm9tICd2dWV4JwppbXBvcnQge21hcEFjdGlvbnN9IGZyb20gJ3Z1ZXgnCgpleHBvcnQgZGVmYXVsdCB7CiAgbWV0YUluZm8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGl0bGU6IHRoaXMuJHRpdGxlKCdTZXR0aW5ncycpCiAgICAgIH0KICB9LAogIG5hbWU6ICdzZXR0aW5ncycsCiAgZGF0YTooKSA9Pih7CiAgICBjb2xvcnM6IFsKICAgICAgICB7CiAgICAgICAgICAgIGNvbG9yOiAnI2Y1N2YxNycKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgY29sb3I6ICcjMDI3N2JkJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICBjb2xvcjogJyMwMDg5N2InCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIGNvbG9yOiAnIzQ1NWE2NCcKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgY29sb3I6ICcjZjAzNDM0JwogICAgICAgIH0KICAgIF0sCiAgICBzZWxlY3RlZENvbG9yOiAnJywKICAgIG15QmlsbDogbnVsbAogIH0pLAogIHZhbGlkYXRpb25zOiB7CiAgICAgIGFtb3VudDoge21pblZhbHVlOiBtaW5WYWx1ZSgxKX0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyd1cGRhdGVNeUJpbGwnXSksCiAgICBzZWxlY3RDb2xvcihjb2xvcikgewogICAgICAgIHRoaXMuc2VsZWN0ZWRDb2xvciA9IGNvbG9yCiAgICB9LAogICAgYXN5bmMgdXBkYXRlKCkgewogICAgICAgIGNvbnN0IHNldHRpbmdzQ29sb3IgPSB7CiAgICAgICAgICAgIHNlbGVjdGVkQ29sb3I6IHRoaXMuc2VsZWN0ZWRDb2xvcgogICAgICAgIH0KICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXBkYXRlU2V0dGluZ3MnLCBzZXR0aW5nc0NvbG9yKQogICAgICAgIGF3YWl0IHRoaXMudXBkYXRlTXlCaWxsKHsKICAgICAgICAgIGJpbGw6IHRoaXMubXlCaWxsCiAgICAgICAgfSkKICAgICAgICB0aGlzLiRtZXNzYWdlKCfQndCw0YHRgtGA0L7QudC60Lgg0L7QsdC90L7QstC70LXQvdGLJykKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKQogICAgfQogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2ZldGNoU2V0dGluZ3MnKQogICAgdGhpcy5zZWxlY3RlZENvbG9yID0gc2V0dGluZ3Muc2VsZWN0ZWRDb2xvcgogICAgdGhpcy5teUJpbGwgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmluZm8uYmlsbAoKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuc2VsZWN0ID0gTS5Gb3JtU2VsZWN0LmluaXQodGhpcy4kcmVmcy5zZWxlY3QpCiAgICAgICAgTS51cGRhdGVUZXh0RmllbGRzKCkKICAgIH0sIDApCiAgfQp9Cg=="},{"version":3,"sources":["Settings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Settings.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <div class=\"page-title\">\n            <h3>{{'Settings' | localize}}</h3>\n        </div>\n        <div class=\"settings-row\">\n            <p>{{'Interface_color' | localize}}</p>\n            <ul class=\"inter-color\">\n                <li  \n                    v-for=\"(col, index) in colors\" \n                    :key=\"index\" \n                    :style=\"{backgroundColor : col.color}\" \n                    @click=\"selectColor(col.color)\" \n                    :class=\"{active : selectedColor == col.color}\"\n                ></li>\n            </ul>\n        </div>\n        <div class=\"settings-row\">\n            <p>{{'My_bill' | localize}}</p>\n            <div class=\"input-field\">\n                <currency-input v-model=\"myBill\" currency=\"KZT\" :class=\"{invalid: $v.amount.$dirty && !$v.amount.minValue}\"/>\n                <span \n                class=\"helper-text invalid\"\n                v-if=\"$v.amount.$dirty && !$v.amount.minValue\"\n                >\n                {{'Minimum_value' | localize}} {{$v.amount.$params.minValue.min}}\n                </span>\n            </div>\n        </div>\n        <div class=\"settings-button\">\n            <button @click=\"update\" class=\"btn waves-effect waves-light\">\n                {{'Update' | localize}}\n                <i class=\"material-icons right\">send</i>\n            </button>\n        </div>\n    </div>\n</template>\n\n<script>\nimport localizeFilter from '@/filters/localize.filter'\nimport  {required, minValue} from 'vuelidate/lib/validators'\nimport {mapGetters} from 'vuex'\nimport {mapActions} from 'vuex'\n\nexport default {\n  metaInfo() {\n      return {\n        title: this.$title('Settings')\n      }\n  },\n  name: 'settings',\n  data:() =>({\n    colors: [\n        {\n            color: '#f57f17'\n        },\n        {\n            color: '#0277bd'\n        },\n        {\n            color: '#00897b'\n        },\n        {\n            color: '#455a64'\n        },\n        {\n            color: '#f03434'\n        }\n    ],\n    selectedColor: '',\n    myBill: null\n  }),\n  validations: {\n      amount: {minValue: minValue(1)}\n  },\n  methods: {\n    ...mapActions(['updateMyBill']),\n    selectColor(color) {\n        this.selectedColor = color\n    },\n    async update() {\n        const settingsColor = {\n            selectedColor: this.selectedColor\n        }\n        await this.$store.dispatch('updateSettings', settingsColor)\n        await this.updateMyBill({\n          bill: this.myBill\n        })\n        this.$message('Настройки обновлены')\n        location.reload()\n    }\n  },\n  async created() {\n    const settings = await this.$store.dispatch('fetchSettings')\n    this.selectedColor = settings.selectedColor\n    this.myBill = this.$store.getters.info.bill\n\n    setTimeout(() => {\n        this.select = M.FormSelect.init(this.$refs.select)\n        M.updateTextFields()\n    }, 0)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.settings-row {\n    margin-bottom: 2rem;\n    p {\n        font-size: 1.1rem;\n        margin-bottom: 0.5rem;\n    }\n    .inter-color {\n        display: flex;\n        margin-top: 0;\n        li {\n            width: 1.75rem;\n            height: 1.75rem;\n            border-radius: 50%;\n            margin-right: 0.75rem;\n            cursor: pointer;\n        }\n        .active {\n            border: 2px solid #e0e0e0;\n        }\n    }\n}\n.settings-button {\n    display: flex;\n    justify-content: flex-end;\n}\n</style>"]}]}